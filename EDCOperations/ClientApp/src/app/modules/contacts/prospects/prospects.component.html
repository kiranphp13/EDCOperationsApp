<ngx-spinner bdColor="rgba(51, 51, 51, 0.8)" size="default" type="ball-spin-clockwise">
  <p style="color: white">Please Wait. </p>
</ngx-spinner>


<div class="mx-4">
  <div fxLayout="row" class="">
    <div fxFlex="100">
      <h4>Prospects</h4>
    </div>
  </div>

  <div fxLayout="row" fxLayout.xs="column" class="">
    <div fxFlex="66%" fxFlex.xs="100%" fxFlex.sm="100%" fxFlex.xs="100%">
      <button *ngIf="loggedUserRole === 'Admin'" class="btn btn-sm btn-success mr-2" [routerLink]="['/contacts/prospects/add']">Add</button>
      <button class="btn btn-sm btn-success" (click)="onBtCSVExport()">Export to CSV</button>
    </div>
    <div fxFlex="34%" fxFlex.sm="100%" fxFlex.xs="100%" fxFlexAlign="end end">
      <div class="form-inline">
        Page Size:&nbsp;
        <select class="form-control input-sm" (change)="onPageSizeChanged()" id="page-size" [(ngModel)]="pageSize">
          <option value="10" selected>10</option>
          <option value="20">20</option>
          <option value="50">50</option>
          <option value="100">100</option>
        </select> &nbsp;&nbsp;
        <input type="text" class="form-control" placeholder="Search.." (keyup)="searchRecords(searchKey.value)"
               #searchKey>
      </div>
    </div>
  </div>
  <div fxLayout="row" fxLayout.xs="column" class="mt-3">
    <div fxFlex="70%" fxFlex.sm="100%" fxFlex.xs="100%">
      <!-- <ag-grid-angular
        #agGrid
        style="width: 100%;"
        id="myGrid"
        class="ag-theme-balham"
        [columnDefs]="columnDefs"
        [defaultColDef]="defaultColDef"
        [rowData]="rowData"
        [pagination]="true"
        [paginationPageSize]="10"
        [frameworkComponents]="frameworkComponents"
        (gridReady)="onGridReady($event)"
        [context]="context">
      </ag-grid-angular> -->
      <ag-grid-angular
        style="width: 100%;" #agGrid
        class="ag-theme-balham"
        [rowData]="rowData"
        [columnDefs]="columnDefs" [defaultColDef]="defaultColDef"
        (gridReady)="onGridReady($event)"
        [frameworkComponents]="frameworkComponents" [pagination]="true"
        [paginationPageSize]="10"
        [context]="context">
      </ag-grid-angular>
    </div>
  </div>

  <ng-template #view_record let-modal>
    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title">{{_record?.first}} {{_record?.middle}} {{_record?.last}}</h4>
      <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <table  class="table table-striped">
        <tbody>
        <tr>
          <td>Name</td>
          <td>: {{_record?.first}} {{_record?.middle}} {{_record?.last}}</td>
        </tr>
        <tr>
          <td>Email</td>
          <td>: {{_record?.email}}</td>
        </tr>
        <tr>
          <td>Phone</td>
          <td>: {{_record?.phone1}}</td>
        </tr>
        <tr>
          <td>Agency</td>
          <td>: {{_record?.agencyName}}</td>
        </tr>
        <tr>
          <td>Company</td>
          <td>: {{_record?.company}}</td>
        </tr>
        <tr>
          <td>Address</td>
          <td>: {{_record?.address1}}  {{_record?.address1}}</td>
        </tr>
        <tr>
          <td>City</td>
          <td>: {{_record?.city}}</td>
        </tr>
        <tr>
          <td>State</td>
          <td>: {{_record?.state}}</td>
        </tr>
        <tr>
          <td>Country</td>
          <td>: {{_record?.country}}</td>
        </tr>
        <tr>
          <td>Zip</td>
          <td>: {{_record?.zip}}</td>
        </tr>
        <tr>
          <td>Updated By</td>
          <td>: {{_record?.updatedBy}}</td>
        </tr>
        <tr>
          <td>Last Modified</td>
          <td>: {{_record?.updateDate | date :'y-MM-dd hh:mm:ss'}}</td>
        </tr>
        </tbody>

      </table>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-outline-dark" (click)="modal.close('Save click')">Close</button>
    </div>
  </ng-template>

</div>
